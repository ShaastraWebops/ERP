{% extends "tasks/base_portal.html" %}

{% block title %}
{{ block.super }} 
 Comments
{% endblock title %}
 
{% block display_stuff %}

{% if is_task_comment %}
<h2>Task - {{ curr_object.subject }}</h2>
{% else %}
<h2>Subtask - {{ curr_object.subject }}</h2>
{% endif %}

{% if comments %}
<h2>Comments</h2>
<table>
 <tr>
   <th>Author</th>
   <th>Comment</th>
   <th>Time</th>
 </tr>
 {% for comment in comments %}
 <tr>
   <td>{{ comment.author.get_profile.name }}</td>
   <td>{{ comment.comment_string }}</td>
   <td>{{ comment.time_stamp }}</td>
 </tr>
 {% endfor %}
</table>
{% else %}
<h4>There are no Comments yet.</h4>
{% endif %}

{% endblock display_stuff %}

{% block form_stuff %}
{% if not is_visitor %}

{% if comment_status == 'Success' %}
<h4> Comment Successfully Added </h4>
{% endif %}

{% if comment_status == 'Not Found' %}
{% if is_task_comment %}
<h2> No Such Task Exists </h2>
{% else %}
<h2> No Such Subtask Exists </h2>
{% endif %}
{% endif %}

<h2>Add a comment</h2>
<form method="POST" action="./">
  {% csrf_token %}
  <table>
    {{ comment_form }}
  </table>
  <input type = "submit" value="Submit">
</form>
{% endif %}
{% endblock form_stuff %}
