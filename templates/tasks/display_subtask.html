{% extends "base_portal.html" %}

{% block title %}
{{ block.super }} 
Subtask
{% endblock title %}

{% block display_stuff %}
<h1>SubTask</h1>

{% if has_updated %}
<h3>The SubTask has successfully been updated.</h3>
{% endif %}


<a href="{% url tasks.views.display_task task_id=curr_subtask.task.id owner_name=page_owner %}">View Task</a>
<form action="" method="post">
  {% csrf_token %}
  {% if is_creator or is_assignee %}
  <table>
    <tr>
      <th>Department</th>
      <td> {{ curr_subtask.department}} </td>
    </tr>
    <tr>
      <th>Description</th>
      <td> {{ curr_subtask.description }} </td>
    </tr>
    <tr>
      <th>Proposed by </th>
      <td> {{ curr_subtask.creator.get_profile.name }} </td>
    </tr>
    <tr>
      <th>Proposing Dept </th>
      <td> {{ curr_subtask.creator.get_profile.department.Dept_Name }} </td>
    </tr>
    {{ curr_subtask_form }}
  </table>
  
  {% else %}
  <table>
    <tr>
      <th>Subject</th>
      <td> {{ curr_subtask.subject }} </td>
    </tr>
    <tr>
      <th>Department</th>
      <td> {{ curr_subtask.department}} </td>
    </tr>
    <tr>
      <th>Description</th>
      <td> {{ curr_subtask.description }} </td>
    </tr>
    <tr>
      <th>Proposed by</th>
      <td> {{ curr_subtask.creator.get_profile.name }} </td>
    </tr>
    <tr>
      <th>Proposing Dept </th>
      <td> {{ curr_subtask.creator.get_profile.department.Dept_Name }} </td>
    </tr>
    <tr>
      <th>Creation Date</th>
      <td> {{ curr_subtask.creation_date }} </td>
    </tr>
    <tr>
      <th>Deadline</th>
      <td> {{ curr_subtask.deadline }} </td>
    </tr>
    <tr>
      <th>Status</th>
      {% if is_visitor %}
      <td> {{ curr_subtask.status }} </td>
      {% else %}
      <td> {{ curr_subtask_form.status }} </td>
      {% endif %}
    </tr>
  </table>

  {% endif %}

  {% if not is_visitor %}
  <input type="submit" value="Submit">
  {% endif %}

</form>

{% endblock display_stuff %}
